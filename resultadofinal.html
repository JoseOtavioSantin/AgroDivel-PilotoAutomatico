<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Resultado Final</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f0f2f5;
      padding: 1rem;
      margin: 0;
      color: #333;
    }

    h2 {
      text-align: center;
      margin-bottom: 1rem;
      color: #002e5d;
    }

    .card {
      background: white;
      border-radius: 12px;
      padding: 1rem;
      margin-bottom: 1rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .linha {
      display: flex;
      justify-content: space-between;
      padding: 6px 0;
      font-size: 16px;
    }

    .linha strong {
      font-weight: bold;
    }

    .caixa-azul {
      background-color: #002e5d;
      color: white;
      padding: 2px 10px;
      border-radius: 6px;
      font-weight: bold;
    }

    .botao-voltar {
      width: 100%;
      background-color: #002e5d;
      color: white;
      padding: 14px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      margin-top: 20px;
      cursor: pointer;
    }

    select {
      padding: 6px;
      font-size: 16px;
    }

    @media (max-width: 500px) {
      .linha {
        flex-direction: column;
        align-items: flex-start;
        gap: 4px;
      }
    }
  </style>
</head>
<body>

  <h2>📊 Resultado do Cálculo</h2>

  <div class="card">
    <div class="linha"><span>✅ Passadas com piloto</span> <strong id="passadasCom">-</strong></div>
    <div class="linha"><span>🚜 Passadas sem piloto</span> <strong id="passadasSem">-</strong></div>
    <div class="linha"><span>📉 Ganho de passadas</span> <strong id="ganhoPassadas">-</strong></div>
    <div class="linha"><span>📐 Área de incremento</span> <strong id="areaIncremento">-</strong></div>
    <div class="linha"><span>🧮 Aumento de área</span> <strong id="aumentoArea">-</strong></div>
  </div>

  <div class="card">
    <div class="linha"><strong>🌾 Aumento de Produtividade</strong></div>
    <div class="linha"><span>🟩 Aumento de área</span> <strong id="prodArea">-</strong></div>
    <div class="linha"><span>📦 Aumento de produção</span> <strong id="sacas">-</strong></div>
    <div class="linha">
    <span>🌾 Produção por hectare</span>
  <input type="number" id="producaoInput" value="60" style="width: 80px; font-size: 16px; padding: 4px;" onchange="atualizarValor()">
</div>
    <div class="linha">
      <span>💰 Valor saca</span>
      <select id="cultura" onchange="atualizarValor()">
        <option value="soja">Soja</option>
        <option value="milho">Milho</option>
        <option value="celoba">Celoba</option>
      </select>
      <strong id="valorSaca">R$ 125,00</strong>
    </div>
    <div class="linha"><span>📈 Projeção financeira</span> <strong id="projecao">-</strong></div>
  </div>

  <div class="card">
    <div class="linha"><span>📊 Receita Incrementada - <span class="caixa-azul" id="nomeCultura">Soja</span></span> <strong id="receita">-</strong></div>
    <div class="linha"><span>⛽ Custo Diesel</span> <strong id="diesel">-</strong></div>
    <div class="linha"><span>📡 Custo Sinal</span> <strong id="sinal">R$ 9.000,00</strong></div>
  </div>

  <div class="card">
    <div class="linha"><strong>🔁 Retorno Piloto Automático</strong> <strong id="retorno">-</strong></div>
  </div>

  <button class="botao-voltar" onclick="window.location.href='index.html'">🔙 Voltar ao Início</button>

  <script>
    const valoresCultura = {
      soja: 125.00,
      milho: 78.50,
      celoba: 93.20
    };

    const nomesCultura = {
      soja: 'SOJA',
      milho: 'MILHO',
      celoba: 'CEBOLA'
    };

    const areaTotal = parseFloat(localStorage.getItem("area_total")) || 0;
    const lado = Math.sqrt(areaTotal * 10000);
    let producaoPorHa = parseFloat(localStorage.getItem("producao_por_ha")) || 60;
    const dieselPorHa = 6.44;
    const custoSinal = 9000;

    const implementoSem = parseFloat(localStorage.getItem("implemento_sem"));
    const imprecisaoSem = parseFloat(localStorage.getItem("imprecisao_sem"));
    const implementoCom = parseFloat(localStorage.getItem("implemento_com"));
    const imprecisaoCom = parseFloat(localStorage.getItem("imprecisao_com"));

    if (!isNaN(implementoSem) && !isNaN(imprecisaoSem) && !isNaN(implementoCom) && !isNaN(imprecisaoCom)) {
      const larguraSem = implementoSem + imprecisaoSem;
      const larguraCom = implementoCom + imprecisaoCom;

      const passadasSem = lado / larguraSem;
      const passadasCom = lado / larguraCom;
      const ganhoPassadas = passadasCom - passadasSem;

      const areaIncrementoM2 = ganhoPassadas * larguraCom * lado;
      const areaIncrementoHa = areaIncrementoM2 / 10000;

      function atualizarValor() {
        producaoPorHa = parseFloat(document.getElementById("producaoInput").value) || 0;
        localStorage.setItem("producao_por_ha", producaoPorHa);
        const cultura = document.getElementById("cultura").value;
        const valorSaca = valoresCultura[cultura];
        const totalSacas = areaIncrementoHa * producaoPorHa;
        const receitaTotal = totalSacas * valorSaca;
        const custoDiesel = dieselPorHa * areaIncrementoHa;
        const retorno = receitaTotal - custoDiesel - custoSinal;

        document.getElementById("valorSaca").textContent = `R$ ${valorSaca.toFixed(2).replace('.', ',')}`;
        document.getElementById("nomeCultura").textContent = nomesCultura[cultura];
        document.getElementById("projecao").textContent = `R$ ${receitaTotal.toFixed(2).replace('.', ',')}`;
        document.getElementById("receita").textContent = `R$ ${receitaTotal.toFixed(2).replace('.', ',')}`;
        document.getElementById("diesel").textContent = `R$ ${custoDiesel.toFixed(2).replace('.', ',')}`;
        document.getElementById("retorno").textContent = `R$ ${retorno.toFixed(2).replace('.', ',')}`;
      }

      window.onload = () => {
        document.getElementById("producaoInput").value = producaoPorHa;
        document.getElementById("passadasSem").textContent = passadasSem.toFixed(0);
        document.getElementById("passadasCom").textContent = passadasCom.toFixed(0);
        document.getElementById("ganhoPassadas").textContent = ganhoPassadas.toFixed(0);
        document.getElementById("areaIncremento").textContent = `${areaIncrementoM2.toFixed(0)} m²`;
        document.getElementById("aumentoArea").textContent = `${areaIncrementoHa.toFixed(2)} ha`;
        document.getElementById("prodArea").textContent = `${areaIncrementoHa.toFixed(2)} ha`;
        document.getElementById("sacas").textContent = `${(areaIncrementoHa * producaoPorHa).toFixed(0)} Sacas`;
        document.getElementById("cultura").value = "soja";
        atualizarValor();
      };
    } else {
      alert("❗ Dados incompletos. Volte e preencha novamente.");
    }
  </script>
</body>
</html>
